<!DOCTYPE html>
<html>
  <head>
    <base target="_top">

    <link href="https://unpkg.com/tabulator-tables@5.2.3/dist/css/tabulator.min.css" rel="stylesheet">
<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">


      <!-- CSS Sanwithz -->
    <link href="https://sanwithz.github.io/tabulatorCss/style.css" rel="stylesheet">

    
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Prompt&display=swap');

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Prompt', sans-serif;
      }
      
      .list {
        background-color: #ffffff;
        padding: 1.8em 1.2em;
        box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
        border-radius: 0.6em;
      }

      /* Media query for small screens */
      @media (max-width: 768px) {
        #example-table .tabulator-row {
          font-size: 2.2em !important; /* Larger font size for rows */
        }
        #example-table .tabulator-header .tabulator-col {
          font-size: 2.2em !important; /* Larger font size for headers */
        }
      }
    </style>
  </head>
  <body>
    <div class="container mt-4">
      <center class="mb-4">
        <img src="https://lh3.googleusercontent.com/d/1OjcauXmDNAE2xtkWLAMQBhTXYjVIdaa4" class="mt-4" style="width:200px; height:auto; padding-bottom: 10px;">  
        <h2>ตารางคะแนน <br/>(DAILY QUIZ)</h2>           
        <h5 class="text-center text-danger">สื่อ และนวัตกรรมครูสิทธิชาติ สิทธิ</h5>   
      </center>
    </div>
    <br>
    <div id="example-table"></div>
    
    <!-- CDN -->
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@5.2.3/dist/js/tabulator.min.js"></script>
    
    <script>
      document.addEventListener("DOMContentLoaded", pageLoad);

      function pageLoad() {
        loadData();
      }

      async function loadData() {
        try {
          const response = await fetch('https://opensheet.elk.sh/1ccAKIMzy4p4yicqq0qjZOTV_Xf7QVZrhsajIykGJKxU/Show');
          const tabledata = await response.json();

          // Initialize Tabulator table
          const table = new Tabulator("#example-table", {
            data: tabledata,            // Load JSON data into Tabulator
            layout: "fitColumns",       // Fit columns to width of the table
            responsiveLayout: "hide",   // Hide columns that don't fit on the table
            tooltips: true,             // Show tooltips on cells
            addRowPos: "top",           // Add new rows to the top of the table
            history: true,              // Enable undo/redo functionality
            pagination: "local",        // Paginate the data
            paginationSize: 40,         // Number of rows per page
            paginationCounter: "rows",  // Display row count in pagination footer
            movableColumns: true,       // Allow column order to be changed
            initialSort: [              // Define initial sort order
              { column: "Rank", dir: "asc" } // Sort by Rank ascending
            ],
            columns: [
              { title: "", field: "ICON", width: 60, vertAlign: "middle", hozAlign: "center" },
              { title: "ลำดับ", field: "Rank", sorter: "number" }, // Set sorter to number for Rank
              { title: "ไอดีไลน์", field: "Username" },
              {
                title: "คะแนนสะสม",
                field: "sum Score",
                vertAlign: "middle",
                formatter: function (cell) {
                  // Add thousand separator
                  let value = cell.getValue();
                  return value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                },
              },
            ],
          });
        } catch (error) {
          console.error("Error fetching data:", error);
        }
      }
    </script>
  </body>
</html>
